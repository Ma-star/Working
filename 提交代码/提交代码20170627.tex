weiguangzhou@hty-controller:~/hengtianyun\$ git status
On branch hengtianyun_neutron_dev
Your branch is up-to-date with 'origin/hengtianyun_neutron_dev'.

Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)
    修改了浮动ip问题：
	modified:patches/juno/horizon/openstack_dashboard/api/neutron.py
    修改网络拓扑删除主机后台报错：
	modified:patches/juno/horizon/openstack_dashboard/dashboards/project/instances/views.py
	修改增加创建虚拟机选择多网卡：
    modified:patches/juno/horizon/openstack_dashboard/dashboards/project/instances/workflows/diy_create_instance.py
	修改从网络拓扑点击创建云主机链接到恒天云创建云主机界面，而不是原生openstack创建云主机界面
    modified:patches/juno/horizon/openstack_dashboard/dashboards/project/network_topology/views.py
    修改创建网络后台报错，定义的函数参数与传递过来的不匹配
	modified:patches/juno/horizon/openstack_dashboard/dashboards/project/networks/workflows.py
    修改恒天云配置启用neutron
	modified:patches/juno/horizon/openstack_dashboard/local/htyun_settings.py
    添加中英文映射
	modified:patches/juno/horizon/openstack_dashboard/locale/zh_CN/LC_MESSAGES/django.mo
	modified:patches/juno/horizon/openstack_dashboard/locale/zh_CN/LC_MESSAGES/django.po
	在创建云主机部分增加云网络step,调整workflow的样式
	modified:patches/juno/horizon/openstack_dashboard/static/dark/templates/project/instances/create.html
	自动生成，忽略
	modified:patches/juno/horizon/static/dashboard/manifest.json

Untracked files:
  (use "git add <file>..." to include in what will be committed)
    添加原生的多网卡选择页面
	patches/juno/horizon/openstack_dashboard/static/dark/templates/horizon/common/_workflow_step_select_nets.html
	patches/juno/horizon/openstack_dashboard/static/dark/templates/project/instances/_select_network.html

no changes added to commit (use "git add" and/or "git commit -a")





/home/weiguangzhou/PycharmProjects/hengtianyun/patches/juno/horizon/openstack_dashboard/dashboards/identity/projects/workflows.py
创建项目报错，代码修改173行
 def __init__(self, request, *args, **kwargs):
        super(CreateProjectInfoAction, self).__init__(request,
                                                      *args,
                                                      **kwargs)
        # For keystone V3, display the two fields in read-only
        if keystone.VERSIONS.active >= 3:
            readonlyInput = forms.TextInput(attrs={'readonly': 'readonly'})
            self.fields["domain_id"].widget = readonlyInput
            self.fields["domain_name"].widget = readonlyInput
        if settings.USE_NEUTRON == False :
            if settings.NETWORK['type'] != 'vlan':
                self.fields["vlan"].widget = forms.HiddenInput()
        else :
            self.fields["vlan"].widget = forms.HiddenInput()
    class Meta:
        name = _("Project Information")
        help_text = _("Create a project to organize users.")


from django.conf import settings
settings.USE_NEUTRON

int_ip = lambda x: '.'.join([str(x/(256**i)%256) for i in range(3,-1,-1)])
ip_int = lambda x:sum([256**j*int(i) for j,i in enumerate(x.split('.')[::-1])])
def get_ips(ip1,ip2):
    f=open('ips.txt','w')
    ip1_num = ip_int(ip1)
    ip2_num = ip_int(ip2)
    for i in range(ip1_num,ip2_num+1):
        f.write(str(int_ip(i))+'\n')
get_ips('192.168.0.0','192.168.255.255')














-----------------------------------------------------------------------------------
Changes not staged for commit:
  (use "git add <file>..." to update what will be committed)
  (use "git checkout -- <file>..." to discard changes in working directory)

	modified:   openstack_dashboard/api/application_notify.py
	modified:   openstack_dashboard/api/nova.py
	modified:   openstack_dashboard/dashboards/admin/floatingips/tables.py
	modified:   openstack_dashboard/dashboards/admin/floatingips/tabs.py
	modified:   openstack_dashboard/dashboards/admin/floatingips/views.py
	modified:   openstack_dashboard/dashboards/admin/nagiosalarm/tables.py
	modified:   openstack_dashboard/dashboards/admin/nagiosalarm/tabs.py
	modified:   openstack_dashboard/dashboards/project/access_and_security/floating_ips/forms.py
	modified:   openstack_dashboard/dashboards/project/floating_ips/views.py
	modified:   openstack_dashboard/dashboards/project/instances/workflows/diy_create_instance.py
	modified:   openstack_dashboard/local/htyun_settings.py
	modified:   openstack_dashboard/locale/zh_CN/LC_MESSAGES/django.mo
	modified:   openstack_dashboard/locale/zh_CN/LC_MESSAGES/django.po
	modified:   openstack_dashboard/static/dark/templates/project/instances/create.html
	modified:   static/dashboard/manifest.json
	modified:   ../nova/virt/libvirt/driver.py

no changes added to commit (use "git add" and/or "git commit -a")
---------------------------------------------------------------------------------------
/home/weiguangzhou/PycharmProjects/hengtianyun3.8.2/patches/juno/keystoneclient/v2_0/users.py






#hengtianyun settings file

修改：PROJECT_SERVICE = []
修改：
DATABASES = {
    "default": {},
    "regionOne": {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'horizon',
        'USER': 'horizon',
        'PASSWORD': 'HORIZON_DBPASS',
        'HOST': '172.16.133.10',
        'PORT': '3306',
    },
    "regionTwo": {
        'ENGINE': 'django.db.backends.mysql',
        'NAME': 'horizon',
        'USER': 'horizon',
        'PASSWORD': 'HORIZON_DBPASS',
        'HOST': '172.16.133.10',
        'PORT': '3306',
    },
}
修改
# Displays information such as billing, price and cost estimates or not
ENABLE_BILLING = True

# Set vlan mode, if value is true, it is fixed ip vlan mode
# else it is floating ip vlan mdoe
# it only work witg vlan type
WITHOUT_FLOATING_IP = False

# if network strong associations is true, every network should binding a project
# else it is not necessary
# it only work while WITHOUT_FLOATING_IP is true now
NETWORK_STRONG_ASSOCIATIONS = True

# Show hty version
HTY_VERSION = "3.8.2"

#Elasticsearch url configuration file by bili@hengtiansoft.com
ELASTICSEARCH_URL = 'http://172.16.19.240:9200'

USE_NEUTRON = True

修改：同步数据库
sudo python manage.py syncdb --database=regionOne


